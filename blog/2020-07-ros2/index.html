<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=apple-touch-icon sizes=120x120 href=https://fog05.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://fog05.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://fog05.io/favicon-16x16.png><link rel=manifest href=https://fog05.io/manifest.json><link rel=mask-icon href=https://fog05.io/safari-pinned-tab.svg color=#5bbad5><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://fog05.io/css/bootstrap-reboot.css><link rel=stylesheet href=https://fog05.io/css/bootstrap.css><link rel=stylesheet href=https://fog05.io/css/font-awesome.min.css><link rel=stylesheet href=https://fog05.io/css/fos.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css><link rel=alternate type=application/rss+xml href=https://fog05.io/blog/index.xml><title>Edge Robotics with Eclipse fog05 Â· Eclipse fog05</title></head><body><header class="navbar navbar-expand navbar-dark flex-column flex-md-row fos-navbar"><a class=navbar-brand href=https://fog05.io/><img src=https://fog05.io/img/fos_logo.png class=align-middle alt="Eclipse fog05 logo" style=width:100px></a><div class="collapse navbar-collapse"><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://fog05.io/>Home</a></li><li class=nav-item><a class=nav-link href=https://fog05.io/docs/getting-started/installation/>Documentation</a></li><li class=nav-item><a class=nav-link href=https://fog05.io/community/>Community</a></li><li class=nav-item><a class="nav-link active" href=https://fog05.io/blog/2020-10-release-0-2-2/>Blog</a></li></ul></div><ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex"><li class=nav-item><a class="nav-link p-2" href=https://github.com/eclipse-fog05 target=_blank rel=noopener aria-label=GitHub><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64.0.0 114.61.0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34.0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49.0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75.0.0 21.49-6.88 70.4 26.24a242.65 242.65.0 01128.18.0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69.0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41.0 34.22-.31 61.83-.31 70.23.0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37.0 256 0z" fill="currentcolor" fill-rule="evenodd"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://gitter.im/atolab/fog05 target=_blank rel=noopener aria-label=Gitter><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Gitter</title><path fill="currentcolor" d="M8.501 4.001H10.5V24H8.501V4.001zm6.999.0V24h-2V4.001h2zM3.5.0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"/></svg></a></li></ul></header><div class="container-fluid fos-blog"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 fos-sidebar"><div class="fos-docs-toggle d-md-none p-0 d-flex ml-3 collapsed align-item-center"><h1 class=fos-title>Edge Robotics with Eclipse fog05</h1><button class="btn btn-link" type=button data-toggle=collapse data-target=#fos-docs-nav aria-controls=fos-docs-nav aria-expanded=false aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><nav class="fos-links collapse" id=fos-docs-nav><div class="fos-toc-item active"><p class=fos-toc-link>Blog Posts</p><ul class="nav fos-sidenav"><li><a href=https://fog05.io/blog/2020-10-release-0-2-2/>Eclipse fog05 - 0.2.2 Release</a></li><li><a href=https://fog05.io/blog/2020-07-ros2/ class=active>Edge Robotics with Eclipse fog05</a></li><li><a href=https://fog05.io/blog/2020-06-release-0-2/>Eclipse fog05 - 0.2 Release</a></li><li><a href=https://fog05.io/blog/2020-04-release-0-1/>Eclipse fog05 - 0.1 Release</a></li><li><a href=https://fog05.io/blog/2018-03-intro-0-1/>Introducing Eclipse fog05</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 fos-toc"><div class=section-nav><nav id=TableOfContents><ul><li><ul><li><a href=#installing-fog05>Installing fog05</a></li><li><a href=#the-robotic-application>The robotic application</a></li><li><a href=#conclusions>Conclusions</a></li></ul></li></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 fos-content fos-docs"><h1 class=fos-title>Edge Robotics with Eclipse fog05</h1><p class=fos-date>28 July 2020</p><p><strong>Edge Robotics</strong> is emerging as a new trend and natural evolution of cloud robotics. Its aims is to leverage compute and storage resources are closer to the robots in order to augment their capabilities while keeping <em>latency</em> under control and enabling new use-cases.</p><p>Moreover it also introduces the possibility to elaborate data closer to where they are produced and gives the user control on the data shared with third parties like cloud platform.</p><p>With Eclipse <strong><a href=https://fog05.io>fog05</a></strong> plugin for <a href=https://index.ros.org/doc/ros2/>ROS2</a>, it is possible to have an <strong>Edge Robotic</strong> system that can enable dynamic reconfiguration and offload of robotic tasks to robots and the nearby Edge infrastructure.</p><p>ROS2 is a robot operating system that provides a set of abstractions and mechanisms to facilitate the writing of complex robotic applications. Using ROS2 robotic application that can be written to run on different robots. Additionally, all communication and low-level interaction will be managed by ROS2 APIs.</p><p>While ROS2 provides great help in writing the application, it provides only basic support to run those applications via the <a href=https://index.ros.org/doc/ros2/Tutorials/Understanding-ROS2-Nodes/#id6><code>ros2 run</code></a> and <a href=https://index.ros.org/doc/ros2/Tutorials/Launch-system/><code>ros2 launch</code></a> .</p><p>While the former provides a way to start a simple robotic application composed by a single component, the second one provides a way to start an application composed by several components and handles all the needed configuration to make it run.</p><p>But both need to be executed directly on the robot itself, usually via a remote shell, thus the support of dynamical application deployment is somewhat limited. This is where Eclipse fog05 comes in play, given its application-agnostic and plugin design you can dynamically deploy your application or part of it using Eclipse fog05.</p><p>Let&rsquo;s immagine having a factory like the one illustrated the picture below.</p><p>In our factory we have Edge servers, in-factory computers and general-purpose robots.</p><p><img src=https://fog05.io/img/smart-factory.png alt="Smart Factory"></p><p>We would like to be able to dynamically configure this infrastructure to achieve different tasks, like transportation of goods from one point to the other of the production line, reconfiguration of the production line, or teleoperation in case a worker cannot enter the production line.</p><p>In such a case we would like to leverage all the computing, storage, and networking resources we have inside the factory plant and not rely on any cloud infrastructure because of security reasons (we do not want to expose our factory data to a third party&mldr;)</p><p>Thanks to Eclipse fog05 we can achieve this goal.</p><h3 id=installing-fog05>Installing fog05</h3><p>First, we need to prepare our infrastructure with Eclipse fog05, so we need to install and configure the fog05 agent in our devices.</p><p>Our infrastructure is composed by three devices:</p><ul><li><a href=https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/>RPi3</a> acting as arm-based SBC</li><li><a href="https://www.adlinktech.com/Products/Computer_on_Modules/SMARC/LEC-AL?lang=en">ADLINK LEC-AL SMARC Compute-On-Module</a>, Atom-based industrial computer</li><li><a href=https://emanual.robotis.com/docs/en/platform/turtlebot3/overview/>TurtleBot3 Burger</a>, with a <a href=https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/>RPi3</a> acting as our general purpose robot.</li></ul><p>In each device we need to install the Eclipse fog05 agent and relative plugins.</p><ul><li><a href="https://www.adlinktech.com/Products/Computer_on_Modules/SMARC/LEC-AL?lang=en">LEC-AL</a>: Zenoh router, fog05 agent, Linux, LinuxBridge and LXD Plugin.</li><li><a href=https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/>RPi3</a>: fog05 agent, Linux, LinuxBridge and LXD plugin</li><li><a href=https://emanual.robotis.com/docs/en/platform/turtlebot3/overview/>TurtleBot3</a>: fog05 agent, Linux, LinuxBridge and ROS2 plugin</li></ul><p>Install dependencies on on <a href="https://www.adlinktech.com/Products/Computer_on_Modules/SMARC/LEC-AL?lang=en">LEC-AL</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo apt udpdate <span style=color:#f92672>&amp;&amp;</span> sudo apt install libssl-dev libev-dev python3-pip python3-lxml -y
$ sudo pip3 install zenoh<span style=color:#f92672>==</span>0.3.0 yaks<span style=color:#f92672>==</span>0.3.0.post1 fog05-sdk<span style=color:#f92672>==</span>0.2.1 fog05<span style=color:#f92672>==</span>0.2.1
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/libzenoh-0.3.0-amd64.deb
$ sudo apt install ./libzenoh-0.3.0-amd64.deb -y
</code></pre></div><p>Install LXD on <a href="https://www.adlinktech.com/Products/Computer_on_Modules/SMARC/LEC-AL?lang=en">LEC-AL</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo apt remove --purge lxd lxd-client -y
$ sudo snap install lxd
$ sudo lxd init <span style=color:#75715e>#default answers are ok</span>

</code></pre></div><p>Installing Zenoh router on <a href="https://www.adlinktech.com/Products/Computer_on_Modules/SMARC/LEC-AL?lang=en">LEC-AL</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/zenoh_0.3.0-1_amd64.deb
$ sudo apt install ./zenoh_0.3.0-1_amd64.deb -y
</code></pre></div><p>Installing fog05 agent on <a href="https://www.adlinktech.com/Products/Computer_on_Modules/SMARC/LEC-AL?lang=en">LEC-AL</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05_0.2.1-1_amd64.deb
$ sudo apt install ./fog05_0.2.1-1_amd64.deb -y
</code></pre></div><p>Installing and configuring fog05 agent on RPi3 and TurtleBot</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo apt install libev4 libssl.1.1 python3-pip python3-lxml -y
$ sudo pip3 install zenoh<span style=color:#f92672>==</span>0.3.0 yaks<span style=color:#f92672>==</span>0.3.0.post1 fog05-sdk<span style=color:#f92672>==</span>0.2.1 fog05<span style=color:#f92672>==</span>0.2.1
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/libzenoh-0.3.0-arm64.deb
$ sudo apt install ./libzenoh-0.3.0-arm64.deb -y
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05_0.2.1-1_arm64.deb
$ sudo apt install ./fog05_0.2.1-1_arm64.deb -y
$ sudo vim /etc/fos/agent.json
</code></pre></div><p>Configure the <code>yaks</code> parameter with the address of the LEC-AL board (192.168.86.250) and the <code>mgmt_interface</code> with the name of the interface connected to the management network</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;agent&#34;</span>: {
        <span style=color:#f92672>&#34;system&#34;</span>: <span style=color:#e6db74>&#34;0&#34;</span>,
        <span style=color:#f92672>&#34;pid_file&#34;</span>: <span style=color:#e6db74>&#34;/var/fos/agent.pid&#34;</span>,
        <span style=color:#f92672>&#34;expose&#34;</span>: <span style=color:#66d9ef>true</span>,
        <span style=color:#f92672>&#34;yaks&#34;</span>: <span style=color:#e6db74>&#34;tcp/192.168.86.250:7447&#34;</span>,
        <span style=color:#f92672>&#34;path&#34;</span>: <span style=color:#e6db74>&#34;/var/fos&#34;</span>,
        <span style=color:#f92672>&#34;enable_lldp&#34;</span>: <span style=color:#66d9ef>false</span>,
        <span style=color:#f92672>&#34;enable_spawner&#34;</span>: <span style=color:#66d9ef>false</span>,
        <span style=color:#f92672>&#34;mgmt_interface&#34;</span>: <span style=color:#e6db74>&#34;eth0&#34;</span>,
        <span style=color:#f92672>&#34;lldp_conf&#34;</span>: <span style=color:#e6db74>&#34;/etc/fos/lldpd/lldpd.conf&#34;</span>
    },
    <span style=color:#f92672>&#34;plugins&#34;</span>: {
        <span style=color:#f92672>&#34;plugin_path&#34;</span>: <span style=color:#e6db74>&#34;/etc/fos/plugins&#34;</span>,
        <span style=color:#f92672>&#34;autoload&#34;</span>: <span style=color:#66d9ef>false</span>,
        <span style=color:#f92672>&#34;auto&#34;</span>: []
    }
}
</code></pre></div><p>Then we need to install and configure the plugins.</p><p>Install and configure plugins in the LEC-AL:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-os-linux_0.2.0-1_amd64.deb
$ sudo apt install ./fog05-plugin-os-linux_0.2.0-1_amd64.deb -y
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-net-linuxbridge_0.2.1-1_amd64.deb
$ sudo apt install ./fog05-plugin-net-linuxbridge_0.2.1-1_amd64.deb -y
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-fdu-lxd_0.2.1-1_amd64.deb
$ sudo apt install ./fog05-plugin-fdu-lxd_0.2.1-1_amd64.deb -y
</code></pre></div><p>Then configure the field <code>dataplane_interface</code> on the LinuxBridge configuration file (<code>/etc/fos/plugin/plugin-net-linuxbridge/linuxbridge_plugin.json</code> ) with the correct value of the interface to be used for virtual networks.</p><p>Install and configure plugins on RPi3:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-os-linux_0.2.0-1_arm64.deb
$ sudo apt install ./fog05-plugin-os-linux_0.2.0-1_arm64.deb -y
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-net-linuxbridge_0.2.1-1_arm64.deb
$ sudo apt install ./fog05-plugin-net-linuxbridge_0.2.1-1_arm64.deb -y
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-fdu-lxd_0.2.1-1_arm64.deb
$ sudo apt install ./fog05-plugin-fdu-lxd_0.2.1-1_arm64.deb -y
</code></pre></div><p>Then configure the Linux, LinuxBridge, and LXD plugin to use the Zenoh server on the LEC-AL, updating the <code>ylocator</code> accordingly in the configuration files, <code>/etc/fos/plugin/plugin-os-linux/linux_plugin.json</code> , <code>/etc/fos/plugin/plugin-net-linuxbridge/linuxbridge_plugin.json</code> and <code>/etc/fos/plugin/plugin-fdu-lxd/LXD_plugin.json</code>.</p><p>Then configure the field <code>dataplane_interface</code> on the LinuxBridge configuration file with the correct value of the interface to be used for virtual networks.</p><p>Then we install and configure the plugins on the Turtlebot.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-os-linux_0.2.0-1_arm64.deb
$ sudo apt install ./fog05-plugin-os-linux_0.2.0-1_arm64.deb -y
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-net-linuxbridge_0.2.1-1_arm64.deb
$ sudo apt install ./fog05-plugin-net-linuxbridge_0.2.1-1_arm64.deb -y
$ wget https://github.com/eclipse-fog05/fog05/releases/download/v0.2.1/fog05-plugin-fdu-ros2_0.2.1-1_arm64.deb
$ sudo apt install ./fog05-plugin-fdu-ros2_0.2.1-1_arm64.deb -y
</code></pre></div><p>Then configure the Linux, LinuxBridge, and LXD plugin to use the Zenoh server on the LEC-AL, updating the <code>ylocator</code> accordingly in the configuration files, <code>/etc/fos/plugin/plugin-os-linux/linux_plugin.json</code> , <code>/etc/fos/plugin/plugin-net-linuxbridge/linuxbridge_plugin.json</code> and <code>/etc/fos/plugin/plugin-fdu-ros2/ros2_plugin.json</code>.</p><p>Then configure the field <code>dataplane_interface</code> on the LinuxBridge configuration file with the correct value of the interface to be used for virtual networks.</p><p>Now we can start the services in all nodes:</p><p><a href="https://www.adlinktech.com/Products/Computer_on_Modules/SMARC/LEC-AL?lang=en">LEC-AL</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
$ sudo systemctl start zenoh
$ sudo systemctl start fos_agent
$ sudo systemctl start fos_linux
$ sudo systemctl start fos_linuxbridge
$ sudo systemctl start fos_lxd
</code></pre></div><p><a href=https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/>RPi3</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo systemctl start fos_agent
$ sudo systemctl start fos_linux
$ sudo systemctl start fos_linuxbridge
$ sudo systemctl start fos_lxd
</code></pre></div><p><a href=https://emanual.robotis.com/docs/en/platform/turtlebot3/overview/>TurtleBot3</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo systemctl start fos_agent
$ sudo systemctl start fos_linux
$ sudo systemctl start fos_linuxbridge
$ sudo systemctl start fos_ros2
</code></pre></div><h3 id=the-robotic-application>The robotic application</h3><p>Then, we need to define the components of our application.
We selected a teleoperation application, thus it will be composed by the following components:</p><ul><li>The Robotic Client</li><li>The Teleoperation Server</li><li>The Teleoperation WebUI</li><li>Virutal Networking infrastructure</li></ul><p>Each of these component can be packaged as a different kind of virtualization technology, in our case we selected heterogenous virtualization technologies to show how Eclipse fog05 deals with etherogeneity.</p><ul><li>ROS2: Robotic Sensors and Actuators, Robotic Client</li><li>LXD: Virtual Access Point, Virtual Gateway, Teleoperation WebUI</li><li>Docker: Teleoperation Server</li></ul><p>For each of these components, we need to define a <code>descriptor</code> that explains to fog05 how to deploy the component.</p><p><a href=https://github.com/atolab/eclipse-fog05-ros2-demo>This repository</a> contains the <code>descriptors</code> for each component, as well as the script to build all the needed images.</p><p>Using the following script we can instantiate the whole robotic application using the fog05 APIs</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> os
<span style=color:#f92672>from</span> fog05 <span style=color:#f92672>import</span> FIMAPI
<span style=color:#f92672>from</span> fog05_sdk.interfaces.FDU <span style=color:#f92672>import</span> FDU
<span style=color:#f92672>import</span> sys
<span style=color:#f92672>import</span> time
<span style=color:#f92672>import</span> json

DESC_FOLDER <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;./descriptors&#39;</span>

descs <span style=color:#f92672>=</span> {
    <span style=color:#e6db74>&#39;gw&#39;</span>:<span style=color:#e6db74>&#39;gw.json&#39;</span>,
    <span style=color:#e6db74>&#39;ap&#39;</span>:<span style=color:#e6db74>&#39;vap.json&#39;</span>,
    <span style=color:#e6db74>&#39;zenoh&#39;</span>:<span style=color:#e6db74>&#39;zenoh.json&#39;</span>,
    <span style=color:#e6db74>&#39;server&#39;</span>:<span style=color:#e6db74>&#39;teleop-server.json&#39;</span>,
    <span style=color:#e6db74>&#39;gui&#39;</span>:<span style=color:#e6db74>&#39;gui.json&#39;</span>,
    <span style=color:#e6db74>&#39;motors&#39;</span>:<span style=color:#e6db74>&#39;motors.json&#39;</span>,
    <span style=color:#e6db74>&#39;client&#39;</span>:<span style=color:#e6db74>&#39;client.json&#39;</span>
}

net_desc <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;vnet.json&#39;</span>]

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>read_file</span>(filepath):
    <span style=color:#66d9ef>with</span> open(filepath, <span style=color:#e6db74>&#39;r&#39;</span>) <span style=color:#66d9ef>as</span> f:
        data <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span>read()
    <span style=color:#66d9ef>return</span> data

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>read</span>(fname):
    <span style=color:#66d9ef>return</span> open(fname)<span style=color:#f92672>.</span>read()

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>(ip):
    a <span style=color:#f92672>=</span> FIMAPI(ip)

    fdus <span style=color:#f92672>=</span> {}
    nets <span style=color:#f92672>=</span> []

    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;Current Eclipse fog05 Infrastructure:&#39;</span>)

    nodes <span style=color:#f92672>=</span> a<span style=color:#f92672>.</span>node<span style=color:#f92672>.</span>list()
    <span style=color:#66d9ef>for</span> nid <span style=color:#f92672>in</span> nodes:
        info <span style=color:#f92672>=</span> a<span style=color:#f92672>.</span>node<span style=color:#f92672>.</span>info(nid)
        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;ID: {} Hostname: {}&#39;</span><span style=color:#f92672>.</span>format(nid, info[<span style=color:#e6db74>&#39;name&#39;</span>]))

    input(<span style=color:#e6db74>&#39;Press enter to instantiate the demo&#39;</span>)

    <span style=color:#66d9ef>for</span> d <span style=color:#f92672>in</span> net_desc:
        path_d <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(DESC_FOLDER,d)
        netd <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(read(path_d))
        a<span style=color:#f92672>.</span>network<span style=color:#f92672>.</span>add_network(netd)
        nets<span style=color:#f92672>.</span>append(netd[<span style=color:#e6db74>&#39;uuid&#39;</span>])
        time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>1</span>)

    <span style=color:#66d9ef>for</span> name <span style=color:#f92672>in</span> descs:
        d <span style=color:#f92672>=</span> descs[name]
        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;Instantiating {}&#39;</span><span style=color:#f92672>.</span>format(name))
        path_d <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(DESC_FOLDER,d)
        data <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(read(path_d))
        fdu_d <span style=color:#f92672>=</span> FDU(data)
        fduinfo <span style=color:#f92672>=</span> a<span style=color:#f92672>.</span>fdu<span style=color:#f92672>.</span>onboard(fdu_d)
        fdu_id <span style=color:#f92672>=</span> fduinfo<span style=color:#f92672>.</span>get_uuid()
        <span style=color:#66d9ef>print</span> (<span style=color:#e6db74>&#39;fdu_id : {}&#39;</span><span style=color:#f92672>.</span>format(fdu_id))
        inst_info <span style=color:#f92672>=</span> a<span style=color:#f92672>.</span>fdu<span style=color:#f92672>.</span>define(fdu_id)
        iid <span style=color:#f92672>=</span> inst_info<span style=color:#f92672>.</span>get_uuid()
        a<span style=color:#f92672>.</span>fdu<span style=color:#f92672>.</span>configure(iid)
        a<span style=color:#f92672>.</span>fdu<span style=color:#f92672>.</span>start(iid)
        <span style=color:#66d9ef>print</span> (<span style=color:#e6db74>&#39;iid : {}&#39;</span><span style=color:#f92672>.</span>format(iid))
        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;Instantiated: {}&#39;</span><span style=color:#f92672>.</span>format(name))
        fdus<span style=color:#f92672>.</span>update({fdu_id: iid})
        time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>2</span>)

    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;Instantiated:&#39;</span>)
    <span style=color:#66d9ef>print</span>(json<span style=color:#f92672>.</span>dumps(fdus, indent<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>))
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;Bye!&#39;</span>)

<span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
    <span style=color:#66d9ef>if</span> len(sys<span style=color:#f92672>.</span>argv) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>:
        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;Usage {} &lt;zenoh ip:port&gt;&#34;</span>)
        exit(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
    main(sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>])

</code></pre></div><p>The deployment is exectuted by launching this script, we are connecting directly with the Zenoh router on the LEC-AL as entry point for the system.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#960050;background-color:#1e0010>$</span> python3 deploy<span style=color:#f92672>.</span>py <span style=color:#f92672>&lt;</span>LEC<span style=color:#f92672>-</span>AL ip address<span style=color:#f92672>&gt;</span>
</code></pre></div><p>After deploying we see a new WiFi network <code>Eclipse fog05 Robotic Demo</code> that allows us to connect to the teleoperation of the robot. Once connected we can navigate to the web interface at this address <code>http://172.16.123.50</code> and we are able to see the command interface.</p><p><img src=https://fog05.io/img/robot-ui.jpg alt="Robot UI"></p><p>From this interface we are able to both control the robot movements and monitors its speed.</p><h3 id=conclusions>Conclusions</h3><p>In this blog we have seen how to use Eclipse fog05 in conjunction with ROS2 to manage a complex robotic application.</p><p>But fog05 is not only about robotics, you can use it to manage any sort of application you want to deploy at your own edge or across different locations.</p><div class=fos-next><b>Next up</b>: <a href=/blog/2020-10-release-0-2-2/>Eclipse fog05 - 0.2.2 Release</a></div></main></div></div><footer class="fos-footer text-muted"><div class="container-fluid p-6 p-md-5"><div class=row><div class=col-md-2><h5>Eclipse Incubation</h5><p><img src=https://fog05.io/img/incubation.png style=width:100px></p><p>Eclipse fog05 &trade; is an incubating project under the Eclipse Foundation.</p></div><div class=col-md-2><h5>More Information</h5><p><a href=https://www.eclipse.org/legal target=_blank>Legal</a></p><p><a href=https://www.eclipse.org/legal/privacy.php target=_blank>Privacy policy</a></p><p><a href=https://www.eclipse.org/legal/termsofuse.php target=_blank>Terms of use</a></p><p><a href=https://www.eclipse.org/legal/copyright.php target=_blank>Copyright</a></p><p><a href=https://www.eclipse.org/security/ target=_blank>Report a security issue</a></p><p><a href=https://www.eclipse.org/legal/epl-2.0/ target=_blank>Eclipse Public License 2.0</a></p><p><a href=https://www.apache.org/licenses/LICENSE-2.0 target=_blank>Apache License 2.0</a></p><p><a href=https://www.eclipse.org/ target=_blank>Eclipse Foundation</a></p></div><div class=col-md-2><h5>Sponsored by</h5><p><a href=https://www.eclipse.org target=_blank><img src=https://fog05.io/img/eclipse.svg style=width:100px></a></p><p><a href=https://edgenative.eclipse.org target=_blank><img src=https://fog05.io/img/edge-logo.svg style=width:100px></a></p><p><a href=https://www.adlinktech.com target=_blank><img src=https://cdn.adlinktech.com/webupd/en/Upload/logo.png style=width:100px></a></p></div><div class=col-md-2><h5>Follow us</h5><ul class=fos-footer-links><li><a href=https://github.com/eclipse-fog05><i class="fa fa-github" aria-hidden=true></i>GitHub</a></li><li><a href=https://fog05.io/docs/overview/><i class="fa fa-info-circle" aria-hidden=true></i>About</a></li></ul></div><div class=col-md-2><p><img src=https://fog05.io/img/logo_horizontal_notag.png style=width:75px></p><p>Eclipse fog05 &trade; is free, open source and always will be.</p><p>Copyright &copy 2019 Eclipse Foundation</p><p>Build with <a href=https://gohugo.io/ target=_blank>HUGO</a></p><p>Theme: <a href=https://tokio.rs/ target=_blank>Tokio website theme</a></p></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js integrity=sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7 crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js integrity=sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8 crossorigin=anonymous></script><script src=https://fog05.io/js/bootstrap.min.js></script><script src=https://fog05.io/js/highlight.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script></body></html>